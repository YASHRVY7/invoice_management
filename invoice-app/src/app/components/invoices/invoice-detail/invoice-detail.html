<div class="max-w-4xl mx-auto p-6 bg-gradient-to-br from-gray-50 to-white rounded-2xl shadow-2xl border border-gray-100">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-gray-900">Invoice Details</h1>
    <div class="space-x-3 flex items-center">
      <app-pdf *ngIf="invoice?.id as invoiceId" [invoiceId]="invoiceId"></app-pdf>
      <button (click)="goBack()" class="bg-gray-200 text-gray-800 px-5 py-2.5 rounded-xl hover:bg-gray-300 font-semibold transition-all">Back to List</button>
    </div>
  </div>

  <div *ngIf="loading" class="text-center py-12">
    <div class="flex flex-col items-center justify-center">
      <div class="animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-gray-900 mb-4"></div>
      <p class="text-gray-600 font-medium">Loading invoice...</p>
    </div>
  </div>
  <div *ngIf="error" class="bg-red-50 border-l-4 border-red-500 rounded-xl p-4">
    <p class="text-red-800 font-semibold">{{ error }}</p>
  </div>

  <div *ngIf="invoice" class="space-y-6">
    <!-- Invoice Header -->
    <div class="flex justify-between border-b-2 border-gray-200 pb-6">
      <div class="space-y-2">
        <h2 class="text-2xl font-bold text-gray-900">Invoice #{{ invoice.invoiceNumber }}</h2>
        <p class="text-gray-700"><span class="font-semibold">Issued on:</span> {{ invoice.issueDate | date:'mediumDate' }}</p>
        <p class="text-gray-700"><span class="font-semibold">Due on:</span> {{ invoice.dueDate ? (invoice.dueDate | date:'mediumDate') : 'N/A' }}</p>
        <p class="text-gray-700">
          <span class="font-semibold">Status:</span> 
          <span class="capitalize font-bold ml-2 px-3 py-1 rounded-lg text-sm" [ngClass]="{
            'bg-green-100 text-green-800': invoice.status === 'paid',
            'bg-red-100 text-red-800': invoice.status === 'unpaid' || invoice.status === 'overdue',
            'bg-gray-100 text-gray-800': invoice.status === 'cancelled'
          }">{{ invoice.status }}</span>
        </p>
      </div>
      <div class="text-right space-y-2 bg-gray-50 p-4 rounded-xl border border-gray-200">
        <h3 class="font-bold text-gray-900 text-lg mb-3">Client Details</h3>
        <p class="font-semibold text-gray-900">{{ invoice.clientName }}</p>
        <p *ngIf="invoice.clientAddress" class="text-gray-600">{{ invoice.clientAddress }}</p>
        <p *ngIf="invoice.clientEmail" class="text-gray-600">{{ invoice.clientEmail }}</p>
        <p *ngIf="invoice.clientPhone" class="text-gray-600">{{ invoice.clientPhone }}</p>
      </div>
    </div>

    <!-- Items Table -->
    <div class="overflow-x-auto rounded-xl border border-gray-200 shadow-sm">
      <table class="table-auto w-full border-collapse">
        <thead class="bg-gray-50">
          <tr>
            <th class="border-b border-gray-200 px-4 py-4 text-left font-bold text-gray-700 text-sm uppercase tracking-wider">Description</th>
            <th class="border-b border-gray-200 px-4 py-4 text-right font-bold text-gray-700 text-sm uppercase tracking-wider w-24">Qty</th>
            <th class="border-b border-gray-200 px-4 py-4 text-right font-bold text-gray-700 text-sm uppercase tracking-wider w-32">Unit Price</th>
            <th class="border-b border-gray-200 px-4 py-4 text-right font-bold text-gray-700 text-sm uppercase tracking-wider w-32">Total</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-100">
          <tr *ngFor="let item of invoice.items" class="hover:bg-gray-50 transition-colors">
            <td class="px-4 py-3 text-gray-900">{{ item.description }}</td>
            <td class="px-4 py-3 text-right text-gray-900 font-medium">{{ item.quantity }}</td>
            <td class="px-4 py-3 text-right text-gray-900 font-medium">{{ item.unitPrice | currency:'INR':'symbol':'1.2-2':'en-IN' }}</td>
            <td class="px-4 py-3 text-right text-gray-900 font-bold">
              {{ (item.totalPrice ?? (item.quantity * item.unitPrice)) | currency:'INR':'symbol':'1.2-2':'en-IN' }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    

    <!-- Totals -->
    <div class="bg-gradient-to-br from-gray-50 to-white rounded-2xl border border-gray-200 p-6 shadow-sm">
      <div class="flex justify-end">
        <div class="space-y-4 text-right">
          <div class="flex items-center justify-end space-x-16">
            <span class="text-sm font-semibold text-gray-700">Subtotal:</span>
            <span class="text-lg font-bold text-gray-900 w-32 text-right">{{ invoice.subtotal | currency:'INR':'symbol':'1.2-2':'en-IN' }}</span>
          </div>
          <div class="flex items-center justify-end space-x-16">
            <span class="text-sm font-semibold text-gray-700">Tax:</span>
            <span class="text-lg font-bold text-gray-900 w-32 text-right">{{ invoice.taxAmount | currency:'INR':'symbol':'1.2-2':'en-IN' }}</span>
          </div>
          <div class="flex items-center justify-end space-x-16 pt-4 border-t-2 border-gray-300">
            <span class="text-lg font-bold text-gray-900">Total:</span>
            <span class="text-2xl font-bold text-gray-900 w-32 text-right">{{ invoice.totalAmount | currency:'INR':'symbol':'1.2-2':'en-IN' }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
